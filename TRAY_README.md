# システムトレイ（常駐）機能

## 概要
Coinglass Scraperは、システムトレイ（タスクバー右端の通知領域）に常駐させることができます。
これにより、ウィンドウを閉じてもバックグラウンドでスクレイピングを継続できます。

## 使い方

### 1. ウィンドウを閉じるとき
ウィンドウの「×」ボタンをクリックすると、以下の選択肢が表示されます：

- **はい**: アプリケーションを完全に終了
- **いいえ**: システムトレイに最小化（常駐）
- **キャンセル**: 閉じる操作をキャンセル

### 2. システムトレイアイコン
常駐中は、タスクバー右端の通知領域にアイコンが表示されます。

### 3. トレイメニュー
トレイアイコンを右クリックすると、以下のメニューが表示されます：

- **表示**: ウィンドウを再表示
- **スクレイピング開始**: バックグラウンドでスクレイピングを開始
- **スクレイピング停止**: スクレイピングを停止
- **終了**: アプリケーションを完全に終了

### 4. ウィンドウの再表示
以下の方法でウィンドウを再表示できます：
- トレイアイコンを右クリック → 「表示」
- トレイアイコンをダブルクリック（一部の環境）

## 注意事項

- 常駐中もスクレイピングは継続されます
- データベースへの記録も継続されます
- ログファイルも更新され続けます
- メモリ使用量に注意してください

## トラブルシューティング

### トレイアイコンが表示されない
- Windowsの通知領域の設定を確認
- 隠れているアイコンを表示（^マークをクリック）

### アイコンが残る
- タスクマネージャーでプロセスを確認
- 必要に応じて手動で終了

## 開発者向け情報

### 使用ライブラリ
- `pystray`: システムトレイ機能
- `PIL (Pillow)`: アイコン画像処理

### アイコンファイル
- `icon.ico`があれば使用
- なければデフォルトアイコン（緑色）を生成